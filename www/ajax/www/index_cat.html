<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
  <link rel="stylesheet" type="text/css" href="css/index.css" />

  <title>Càrrega de fitxers</title>

</head>
<body>


<div class="app">
	<div id="deviceready" class="blink">
		<p class="event listening">Conectando al Dispositivo</p>
	</div>
	<h1>Càrrega de fitxers</h1>
	<div id="ready">

		<!-- Nuestro contenido HTML -->

		<div class="botons">
			<button type="button" id="Carrega-prova">Carrega fitxer prova</button><br />
			<button type="button" id="Carrega-a">Carrega fitxer remotament</button><br />
		</div>
		<p class="resultat">
 			<span id="resultat">No s'ha carregat res</span><br />
		</p>

		<!-- Fin de nuestro contenido HTML -->

	</div>
</div>





</div>


<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript">

  document.addEventListener('deviceready', onDeviceReady, false);
  
  /////////////////////////////
	// nuestro codigo
  /////////////////////////////

  	var elts = document.getElementsByTagName('a');
	var Deshabilitar = function() { return false; }
	for (var i = elts.length - 1; i >= 0; --i) {
		// elts[i].onclick = Deshabilitar;
	}
  

  // funcion que se ejecuta cuando el dispositivo esta listo
  //
	function onDeviceReady()
	{
		document.getElementById('deviceready').setAttribute('style', 'display:none;');
		document.getElementById('ready').setAttribute('style', 'display:block;');
		
		document.getElementById('Carrega-prova').addEventListener(
			"click",
			function(){ CarregafitxerLocal('resultat','prova.html'); }
		);
		document.getElementById('Carrega-a').addEventListener(
			"click",
			//function(){ CarregafitxerLocal('resultat','cont/prova2.html'); 
			function(){ CarregafitxerLocal('resultat','http://media-bro.com/robots.txt'); }
		);
	}

    // Funcion que se ejecuta cuando se pulsa Start
    //
    function Start() {
		CarregafitxerLocal('resultat','cont/prova2.html');
    }

    // Funcion que se ejecuta cuando se pulsa Stop
    //
    function Stop() {
    	// codigo
    }

	
	function CarregafitxerLocal(idTag,fitxer)
	{
		var xmlhttp;
		if (window.XMLHttpRequest){ // code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp=new XMLHttpRequest();
		}
		else {// code for IE6, IE5
			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
		document.getElementById(idTag).innerHTML = '';
		xmlhttp.onreadystatechange=function(){
			if (xmlhttp.readyState==4 && xmlhttp.status==200){
		      document.getElementById(idTag).innerHTML = xmlhttp.responseText;
			}
		};
		xmlhttp.open("GET",fitxer,true);
		xmlhttp.send();
	}
	
	
  /////////////////////////////
	// fin de nuestro codigo
  /////////////////////////////



</script>



</body>
</html>
