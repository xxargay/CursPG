<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
  <link rel="stylesheet" type="text/css" href="css/index.css" />

  <title>Carga de ficheros 2</title>

</head>
<body>


<div class="app">
	<div id="deviceready" class="blink">
		<p class="event listening">Conectando al Dispositivo</p>
	</div>
	<h1>Carga de ficheros</h1>
	<div id="ready">

		<!-- Nuestro contenido HTML -->

		<div class="botones">
			<button type="button" id="carga-prueba">Fitxer de prova</button><br />
			<button type="button" id="carga-a">Fitxer remot</button><br /><br />
			<a href="http://media-bro.com/robots.txt">URL</a>
		</div>
		<p class="resultado">
 			<span id="resultado">No hay cargado nada</span><br />
		</p>

		<!-- Fin de nuestro contenido HTML -->

	</div>
</div>





</div>


<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript">

  document.addEventListener('deviceready', onDeviceReady, false);
  /////////////////////////////
	// nuestro codigo
  /////////////////////////////

  
  // funcion que se ejecuta cuando el dispositivo esta listo
  //
	function onDeviceReady()
	{
		document.getElementById('deviceready').setAttribute('style', 'display:none;');
		document.getElementById('ready').setAttribute('style', 'display:block;');
		


		document.getElementById('carga-prueba').addEventListener(
			"click",
			function(){ CargaFicheroLocal('resultado','prova.html'); }
		);
		document.getElementById('carga-a').addEventListener(
			"click",
			// function(){ CargaFicheroLocal('resultado','cont/prova2.html'); }
			function(){ CargaFicheroLocal('resultado','http://media-bro.com/robots.txt'); }
		);
	}



	
	function CargaFicheroLocal(idTag,fichero)
	{
		var xmlhttp;
		if (window.XMLHttpRequest){ // code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp=new XMLHttpRequest();
		}
		else {// code for IE6, IE5
			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
		document.getElementById(idTag).innerHTML = '';
		xmlhttp.onreadystatechange=function(){
			if (xmlhttp.readyState==4 && xmlhttp.status==200){
		      document.getElementById(idTag).innerHTML = xmlhttp.responseText;
			}
		};
		xmlhttp.open("GET",fichero,true);
		xmlhttp.send();
	}
	


	
  /////////////////////////////
	// fin de nuestro codigo
  /////////////////////////////



</script>



</body>
</html>
